# TaskNotes 4.0.2

This release fixes some of the more urgent (and easy-to-fix) bugs that were introduced in the v4 major release. Thanks to everyone for your patience, and to those who have reported issues, for taking the time to do so. There will be more releases over the coming weeks to iron out some of v4's kinks.

## Added

- Added "Not Blocked" view to default task list template
  - Shows incomplete tasks that are ready to work on (not blocked by incomplete dependencies)
  - Uses Bases `list.filter()` to check completion status of each blocking task
  - This new view can be accessed by regenerating the Task List view, or by copying the filters from the [default base templates documentation](https://tasknotes.dev/views/default-base-templates)

## Fixed

- (#1145, #1156) Fixed default Kanban view requiring manual 'Group by' configuration
  - Default Kanban template now automatically includes `groupBy` property set to status
  - Resolves "Kanban requires a 'Group by' property to be configured" error on first use
  - Users no longer need to manually configure grouping through the Sort menu
  - Thanks to @randomness42 and @seepage87 for reporting
- Fixed user-defined custom fields appearing as `user:field_xxx` in generated base templates
  - Custom fields now use their actual property names (e.g., `effort` instead of `user:field_1761435303709`)
  - Ensures Bases can properly query user-defined properties
  - Also fixed `totalTrackedTime` to correctly map to the configured `timeEntries` property name
- (#1145) Improved Kanban error message when no 'Group by' property is configured
  - Now includes instructions: "Click the 'Sort' button and select a property under 'Group by'"
  - Thanks to @randomness42 for the suggestion
- (#1139, #1141) Fixed relationships widget not appearing in project notes
  - Project references are now resolved to full file paths when indexing
  - Uses Obsidian's link resolution API to handle wikilinks, markdown links, and relative paths
  - Restores v3.x behavior where subtasks appear in parent project notes
  - Thanks to @jhedlund, @n1njaznutz, and @luckb0x for reporting and testing
- Fixed dependency blocking status to be status-aware
  - "Blocked (x)" pill now only appears when tasks have **incomplete** blocking dependencies
  - Tasks with all completed blocking dependencies no longer show as blocked
- Fixed cache invalidation bug causing blocking/blocked pills to disappear when editing tasks
  - When a task is modified, only forward dependencies are cleared (stored in its frontmatter)
  - Reverse dependencies are preserved (stored in other tasks' frontmatter)

## Changed

- Removed custom TaskNotes icon from task modals
  - Task creation and edit modals now use Obsidian's standard title styling 
  - Thanks to @kepano for the suggestion
- Moved default base templates documentation to `docs/views/`
  - Location: `docs/views/default-base-templates.md`
  - Added cross-references to official Obsidian Bases documentation
  - Updated code comments to reference new documentation path
- Fixed incorrect quote escaping in default base templates documentation
  - YAML examples now use proper single quotes for strings containing double quotes
