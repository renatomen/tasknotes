# TaskNotes 4.0.0

TaskNotes 4.0 is a stability-focused release that finishes the migration to Obsidian's Bases core plugin. Every task-facing view (Task List, Kanban, Calendar, Agenda, Mini Calendar, and the embedded Relationships widget) now runs on `.base` files. This refactor simplifies the plugin codebase, removes bespoke FilterBar UI logic, and lets workflows feel native to Obsidian—views are just files in your vault that you can version, share, and customize.

## Highlights

- **Bases-first architecture**
  - Task views ship as `.base` files inside `TaskNotes/Views/`
  - Commands and ribbon buttons now open files you control
  - Filtering/grouping/sorting uses Bases YAML instead of TaskNotes-specific UI
  - Agenda is a dedicated list-mode calendar `.base` file for fast daily/weekly reviews
- **Inline workflows stay in sync**
  - Unified Relationships widget embeds a Bases view so project subtasks, dependencies, and blocking tasks stay in one place
  - Task cards inside notes honor the same Bases filtering/grouping rules as standalone views
- **Configurable modals and NLP**
  - New Modal Fields settings tab for dragging, hiding, or requiring fields in create/edit modals
  - Rich markdown editor and customizable NLP triggers, including autocomplete for user fields
- **Calendar and time management**
  - Calendar view modes, time entry creation, and timeblocking now run directly through Bases configuration
  - OAuth calendar sync (Google/Microsoft) and ICS subscriptions surface alongside tasks without custom view code

## Why Bases?

Moving everything to Bases allowed us to delete thousands of lines of bespoke filtering logic, state management, and widget code. The plugin now leans on Obsidian's supported API, which:

- Reduces maintenance overhead and improves reliability
- Lets advanced users version-control and audit their view definitions
- Makes saved views portable between vaults and team members
- Keeps TaskNotes behavior consistent with other Obsidian-native workflows

## Upgrade Notes

- Obsidian **1.10.1 or later** is required (Bases public API with group-by support)
- Enable the **Bases** core plugin before opening TaskNotes views
- Run **Settings → TaskNotes → General → Create Default Files** if you need fresh `.base` files
- Use **Export All Saved Views to Bases** to convert any legacy FilterBar saved views into `.base` files
- The Relationships widget now uses `TaskNotes/Views/relationships.base`; adjust that file to change what appears inside notes

## Breaking Changes

- The old FilterBar UI has been removed—all filtering and saved views live in `.base` files
- Legacy widget settings (`showProjectSubtasks`, `showTaskDependencies`, etc.) were replaced with `showRelationships` and `relationshipsPosition`
- Task view commands now fail if their mapped `.base` file is missing; configure paths under **Settings → TaskNotes → General → View Commands**
- **Priority sorting now uses alphabetical order instead of custom weights**
  - In v3, TaskNotes used priority "weights" to determine sort order (higher weight = higher priority)
  - In v4, Obsidian's Bases plugin sorts priorities alphabetically by their value
  - **Workaround**: Name your priority values to sort alphabetically in your desired order
    - Example: `1-urgent`, `2-high`, `3-medium`, `4-normal`, `5-low`
    - Or: `a-urgent`, `b-high`, `c-medium`, `d-normal`, `e-low`
  - The weight field is still configurable in settings for future use, but does not affect Bases sorting

## Known Issues

- Users upgrading from versions prior to 3.x should export saved views to Bases before deleting old plugin data
- Embedded Bases views still require the Bases plugin to remain enabled; disabling Bases will hide TaskNotes task views
